
{% extends "base.html" %}
{% block title %}Single Artefact{% endblock %}


{% block content %}


  <div class="container-fluid">
    <table class="table table-hover table-striped" data-filter-control="select"
           data-toggle="table"
           data-search="true"
           data-pagination="true"
           data-page-size="20"
           data-pagination-V-Align="top">
          <thead>
            <tr>
              <th>  Name </th>
            </tr>
          </thead>
         <tbody>
    {% for alert in lst %}
    <tr>
      <td>
          <div id="{{ alert['name']}}_TOP">
              <div class="card">
               <div class="card-header" id="headingOne">
                 <h5 class="mb-0">
                   <button class="btn btn-link" data-toggle="collapse" data-target="#{{ alert['name']}}" aria-expanded="true" aria-controls="collapseOne">
                     {{ alert['description']}}
                   </button>
                   <span class="badge badge-danger"> {{ alert['number_of_errors'] }}</span>
                 </h5>
               </div>

               <div id="{{ alert['name']}}" class="collapse" aria-labelledby="headingOne" data-parent="#{{ alert['name']}}_TOP">
                 <div class="card-body">


                   <div class="card">
                    <div class="card-header" id="headingOne">
                      <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#{{ alert['name']}}_VAL" aria-expanded="true" aria-controls="collapseOne">
                          Validation Details
                        </button>
                      </h5>
                    </div>

                    <div id="{{ alert['name']}}_VAL" class="collapse" aria-labelledby="headingOne" data-parent="#{{ alert['name']}}">
                      <div class="card-body">
                        <table class="table">
                          <thead class="thead-dark">
                            <tr>
                              <th scope="col"> Validation Rule </th>
                              <th scope="col"> Message </th>
                              <th scope="col">Validation Status</th>

                            </tr>
                          </thead>
                          <tbody>
                            {% for validation in alert['latest']['version']['validations'] %}
                            <tr>
                              <td>  {{ validation['rule_name']}}   </td>
                              <td>  {{ validation['msg']}}   </td>
                              {% if validation['succes']  %}
                              <td> <span class="pull-left badge badge-pill badge-success">Success</span> </td>
                              {% else %}
                              <td> <span class="pull-left badge badge-pill badge-danger">Resolve</span> <span class="pull-left badge badge-pill badge-secondary">Show More</span>  </td>

                              {% endif %}
                            </tr>

                           {% endfor %}
                            </tbody>
                          </table>
                      </div>
                    </div>
                   </div>
                 </div>
               </div>
              </div>
            </div>

          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>


  </div>

{% endblock %}
